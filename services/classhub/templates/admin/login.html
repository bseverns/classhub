{% extends "admin/base_site.html" %}
{% load i18n static %}
{% block title %}{{ site_header|default:operator_profile.admin_label }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/admin_login.css' %}" />
{% endblock %}

{% block bodyclass %}{{ block.super }} login{% endblock %}
{% block usertools %}{% endblock %}
{% block nav-global %}{% endblock %}
{% block breadcrumbs %}{% endblock %}
{% block content_title %}{% endblock %}

{% block content %}
<a class="skip-link" href="#main-content">Skip to main content</a>
<main id="main-content">
  <div class="login-shell">
    <section class="login-card">
      <h2>{{ site_header|default:operator_profile.admin_label }} Login</h2>
      <p class="help-text">Sign in with your superuser credentials and 2FA token.</p>

      {% if form.errors and not form.non_field_errors %}
        <p class="errornote" role="alert" aria-live="assertive">
          {% blocktranslate count counter=form.errors.items|length %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktranslate %}
        </p>
      {% endif %}

      {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
          <p class="errornote" role="alert" aria-live="assertive">{{ error }}</p>
        {% endfor %}
      {% endif %}

      <form action="{{ app_path }}" method="post" id="login-form" autocomplete="off">
        {% csrf_token %}
        {% for hidden in form.hidden_fields %}
          {{ hidden }}
        {% endfor %}
        {% for field in form.visible_fields %}
          <div class="form-row">
            {{ field.label_tag }} {{ field }}
            {% if field.errors %}
              {% for error in field.errors %}
                <p class="errornote field-inline-error" role="alert" aria-live="assertive">{{ error }}</p>
              {% endfor %}
            {% endif %}
            {% if field.help_text %}
              <p class="help-text field-help-inline">{{ field.help_text|safe }}</p>
            {% endif %}
          </div>
        {% endfor %}
        <input type="hidden" name="next" value="{{ next }}">
        {% url 'admin_password_reset' as password_reset_url %}
        {% if password_reset_url %}
          <div class="password-reset-link">
            <a href="{{ password_reset_url }}">{% translate 'Forgotten your password?' %}</a>
          </div>
        {% endif %}
        <div class="submit-row">
          <input type="submit" value="{% translate 'Log in' %}">
        </div>
      </form>
    </section>
  </div>
</main>
<script src="{% static 'js/admin_login.js' %}" defer></script>
{% endblock %}
